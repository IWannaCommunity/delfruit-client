<div *ngIf="loading">
  <h2>Loading...</h2>
</div>

<div *ngIf="game">
  <div class="game-content">
    <h2>{{game.name}}</h2>
    <div>
      <ng-container [ngPlural]="game.author.length">
        <ng-template ngPluralCase="=0">Creators:</ng-template>
        <ng-template ngPluralCase="=1">Creator:</ng-template>
        <ng-template ngPluralCase="other">Creators:</ng-template>
      </ng-container>
      {{game.author.join(", ")}}
    </div>

    <div class="rating" [ngStyle]="{'background-color': rateColor(game.rating)}">
      <div>Average Rating</div>
      <div class="value">
        {{game.rating | rating}}<br>
        {{game.rating!==null
          ?rateNames[(game.rating/10 | number:'1.0-0')]
          :'&nbsp;'
        }}
      </div>
    </div>
    <div class="rating" [ngStyle]="{'background-color': diffColor(game.difficulty)}">
      <div>Average Difficulty</div>
      <div class="value">
        {{game.difficulty | difficulty}}<br>
        {{game.difficulty!==null
          ?diffNames[(game.difficulty/10 | number:'1.0-0')]
          :'&nbsp;'
        }}
      </div>
    </div>

    <div>Release Date: {{game.date_created ? (game.date_created | date) : 'Not Available'}}</div>

    <div *ngIf="game.url">
      <a target="_blank" href="{{game.url}}">Download Game</a>
    </div>
    <div *ngIf="!game.url">
      Private Game
    </div>

    <app-list *ngIf="user && game"
      [user_id]="user.id"
      [game_id]="game.id">
    </app-list>

    <app-tag-list 
      *ngIf="game" 
      [game_id]="game.id">
    </app-tag-list>

  </div>

  <div class="gallery">
    <ngx-gallery 
      [options]="galleryOptions" 
      [images]="galleryImages"></ngx-gallery>
  </div>

  <mat-expansion-panel *ngIf="user" [(expanded)]="reviewInputExpanded">
    <mat-expansion-panel-header>
        <mat-panel-title>
            Write a Review
        </mat-panel-title>
    </mat-expansion-panel-header>
  <app-review-input 
    [review]="userReview"
    (onSubmit)="submitReview($event)"
    ></app-review-input>
  </mat-expansion-panel>
  <app-review-list 
    *ngIf="this.game" 
    [gameId]="this.game.id"></app-review-list>
</div>

<div *ngIf="notFound">
  <h2>No game found by id {{id}}</h2>
</div>

<div *ngIf="!game && !loading && !notFound">
  <h2>Unable to load game {{id}}. Please try again later.</h2>
</div>